<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#6B46C1">
    <meta name="description" content="Planner Premium ULTRA - Organize sua vida com gamifica√ß√£o, Google Calendar e sustentabilidade">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>‚ú® Planner Premium ULTRA</title>
    
    <link rel="manifest" href="/manifest.json" crossorigin="use-credentials">
    <link rel="apple-touch-icon" href="/icon-152.png">
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bcryptjs/2.4.3/bcrypt.min.js"></script>
    <script src="https://apis.google.com/js/api.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { 
            --primary: #6B46C1; --secondary: #EC4899; --success: #10B981; 
            --danger: #EF4444; --warning: #F59E0B; --dark: #1F2937; 
            --light: #F9FAFB; --gray: #E5E7EB; 
        }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #667eea, #764ba2); color: var(--dark); min-height: 100vh; }
        
        .eco-banner { background: linear-gradient(135deg, #10B981, #059669); color: white; padding: 1rem; text-align: center; font-weight: 700; margin-bottom: 1rem; border-radius: 10px; }
        .eco-stats { display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap; font-size: 0.95em; }
        .eco-stat { display: flex; align-items: center; gap: 0.5rem; }
        
        .app-container { display: none; background: linear-gradient(135deg, #F9FAFB, #F3E8FF); min-height: 100vh; }
        .app-container.active { display: block; }
        
        .navbar { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; padding: 1rem; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 0.5rem; }
        .navbar-title { font-size: 1.2em; font-weight: 800; }
        .navbar-user { display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap; }
        .user-badge { background: rgba(255,255,255,0.2); padding: 0.4rem 0.8rem; border-radius: 15px; font-size: 0.75em; }
        .level-badge { background: linear-gradient(135deg, #F59E0B, #D97706); padding: 0.4rem 0.8rem; border-radius: 15px; font-size: 0.75em; font-weight: 700; cursor: pointer; }
        .btn-nav { background: rgba(255,255,255,0.2); border: 1px solid white; color: white; padding: 0.4rem 0.8rem; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.8em; }
        .btn-nav:hover { background: white; color: var(--primary); }
        
        .tab-menu { display: flex; gap: 0.5rem; background: white; padding: 0.5rem; border-radius: 10px; margin: 1rem auto; max-width: 1400px; overflow-x: auto; flex-wrap: wrap; justify-content: center; }
        .tab-btn { padding: 0.7rem 1rem; border: none; background: transparent; cursor: pointer; font-weight: 600; border-radius: 6px; font-size: 0.9em; white-space: nowrap; }
        .tab-btn.active { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; }
        
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        .container { max-width: 1400px; margin: 0 auto; padding: 1.5rem 1rem; }
        
        .biblioteca-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1rem; }
        .biblioteca-card { background: linear-gradient(135deg, #F3E8FF, #E9D5FF); border-radius: 10px; padding: 1.5rem; cursor: pointer; transition: all 0.3s; border: 2px solid transparent; }
        .biblioteca-card:hover { border-color: var(--primary); transform: translateY(-2px); }
        .biblioteca-icon { font-size: 2em; margin-bottom: 0.5rem; }
        .biblioteca-nome { font-weight: 700; color: var(--dark); margin-bottom: 0.3rem; }
        .biblioteca-desc { font-size: 0.85em; color: #666; }
        
        .tutorial-item { background: white; border-radius: 10px; padding: 1.5rem; margin-bottom: 1rem; cursor: pointer; transition: all 0.3s; border-left: 4px solid var(--primary); box-shadow: 0 4px 15px rgba(0,0,0,0.08); }
        .tutorial-item:hover { transform: translateX(5px); }
        .tutorial-nome { font-weight: 700; color: var(--dark); margin-bottom: 0.5rem; font-size: 1.05em; }
        .tutorial-preview { font-size: 0.9em; color: #666; line-height: 1.6; }
        
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); overflow-y: auto; }
        .modal-content { background: white; margin: 2% auto; padding: 2rem; border-radius: 12px; width: 95%; max-width: 900px; max-height: 90vh; overflow-y: auto; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; border-bottom: 2px solid var(--gray); padding-bottom: 1rem; }
        .close-modal { font-size: 1.5em; cursor: pointer; background: none; border: none; color: #999; }
        
        .btn-primario { padding: 0.8rem 1.5rem; background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; border: none; border-radius: 8px; font-weight: 700; cursor: pointer; }
        
        @media (max-width: 768px) {
            .modal-content { width: 98%; padding: 1rem; }
            .tab-menu { flex-direction: column; }
            .tab-btn { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="app-container" id="appContainer">
        <div class="navbar">
            <div class="navbar-title">‚ú® Planner Premium ULTRA</div>
            <div class="navbar-user">
                <span class="level-badge" id="levelBadge">‚≠ê N√≠vel 1</span>
                <span class="user-badge">üë§ <span id="userName">User</span></span>
                <button class="btn-nav" onclick="logout()">Sair</button>
            </div>
        </div>

        <div class="eco-banner">
            üå± 100% Digital = Zero Papel | 
            <div class="eco-stats">
                <div class="eco-stat">üìÑ Papel economizado: <strong id="paperSaved">0</strong> folhas</div>
                <div class="eco-stat">üåç Equivalente a <strong id="treesSaved">0</strong> √°rvores</div>
            </div>
        </div>

        <div class="container">
            <div class="tab-menu">
                <button class="tab-btn active" onclick="openTab('planners')">üìã Planners</button>
                <button class="tab-btn" onclick="openTab('biblioteca')">üìñ Biblioteca</button>
                <button class="tab-btn" onclick="openTab('tutoriais')">üìö Tutoriais</button>
                <button class="tab-btn" onclick="openTab('google')">üìÖ Google Calendar</button>
                <button class="tab-btn" onclick="openTab('stats')">üìä Estat√≠sticas</button>
            </div>

            <!-- PLANNERS TAB -->
            <div id="plannersTab" class="tab-content active">
                <h2 style="margin-bottom:1rem;">üìã Meus Planners</h2>
                <div id="meusPlanners" style="display:grid; grid-template-columns:repeat(auto-fill, minmax(200px, 1fr)); gap:1rem;"></div>
            </div>

            <!-- BIBLIOTECA TAB (900+ P√°ginas Hiperlinkadas) -->
            <div id="bibliotecaTab" class="tab-content">
                <h2 style="margin-bottom:1rem; font-size:1.3em; font-weight:800;">üìñ Biblioteca Premium (900+ P√°ginas)</h2>
                <p style="margin-bottom:1.5rem; color:#666;">Acesse templates prontos, planejadores tem√°ticos e muito mais!</p>
                
                <h3 style="margin-bottom:1rem; font-weight:700;">üìÖ Planejadores Por Per√≠odo</h3>
                <div class="biblioteca-grid">
                    <div class="biblioteca-card" onclick="abrirBiblioteca('diario')">
                        <div class="biblioteca-icon">üìù</div>
                        <div class="biblioteca-nome">Planejador Di√°rio</div>
                        <div class="biblioteca-desc">365 p√°ginas di√°rias com metas do dia, reflex√£o e tracking</div>
                    </div>
                    <div class="biblioteca-card" onclick="abrirBiblioteca('semanal')">
                        <div class="biblioteca-icon">üìÜ</div>
                        <div class="biblioteca-nome">Planejador Semanal</div>
                        <div class="biblioteca-desc">52 p√°ginas semanais com cronograma e prioridades</div>
                    </div>
                    <div class="biblioteca-card" onclick="abrirBiblioteca('mensal')">
                        <div class="biblioteca-icon">üìä</div>
                        <div class="biblioteca-nome">Planejador Mensal</div>
                        <div class="biblioteca-desc">12 p√°ginas mensais com objetivos e tracking</div>
                    </div>
                    <div class="biblioteca-card" onclick="abrirBiblioteca('anual')">
                        <div class="biblioteca-icon">üéØ</div>
                        <div class="biblioteca-nome">Planejador Anual</div>
                        <div class="biblioteca-desc">Vis√£o completa do ano com metas e milestones</div>
                    </div>
                </div>

                <h3 style="margin-top:2rem; margin-bottom:1rem; font-weight:700;">üéØ Planejadores Tem√°ticos</h3>
                <div class="biblioteca-grid">
                    <div class="biblioteca-card" onclick="abrirBiblioteca('financeiro')">
                        <div class="biblioteca-icon">üí∞</div>
                        <div class="biblioteca-nome">Planejador Financeiro</div>
                        <div class="biblioteca-desc">Controle or√ßamento, despesas e investimentos</div>
                    </div>
                    <div class="biblioteca-card" onclick="abrirBiblioteca('saude')">
                        <div class="biblioteca-icon">üí™</div>
                        <div class="biblioteca-nome">Planejador de Sa√∫de</div>
                        <div class="biblioteca-desc">Tracking de exerc√≠cios, nutri√ß√£o e bem-estar</div>
                    </div>
                    <div class="biblioteca-card" onclick="abrirBiblioteca('leitura')">
                        <div class="biblioteca-icon">üìö</div>
                        <div class="biblioteca-nome">Rastreador de Leitura</div>
                        <div class="biblioteca-desc">Registre livros lidos, notas e resenhas</div>
                    </div>
                    <div class="biblioteca-card" onclick="abrirBiblioteca('viagem')">
                        <div class="biblioteca-icon">‚úàÔ∏è</div>
                        <div class="biblioteca-nome">Planejador de Viagens</div>
                        <div class="biblioteca-desc">Organize roteiros, or√ßamentos e itiner√°rios</div>
                    </div>
                    <div class="biblioteca-card" onclick="abrirBiblioteca('metas')">
                        <div class="biblioteca-icon">üéØ</div>
                        <div class="biblioteca-nome">Rastreador de Metas</div>
                        <div class="biblioteca-desc">Defina e acompanhe objetivos pessoais</div>
                    </div>
                    <div class="biblioteca-card" onclick="abrirBiblioteca('habitos')">
                        <div class="biblioteca-icon">üî•</div>
                        <div class="biblioteca-nome">Construtor de H√°bitos</div>
                        <div class="biblioteca-desc">Crie streaks e monitore novos h√°bitos</div>
                    </div>
                </div>
            </div>

            <!-- TUTORIAIS TAB -->
            <div id="tutoriaisTab" class="tab-content">
                <h2 style="margin-bottom:1.5rem; font-size:1.3em; font-weight:800;">üìö Tutoriais Completos</h2>
                
                <div class="tutorial-item" onclick="abrirTutorial('comeco')">
                    <div class="tutorial-nome">üöÄ Como Come√ßar - Primeiros Passos</div>
                    <div class="tutorial-preview">
                        Aprenda o b√°sico do Planner Premium ULTRA. Configure sua conta, entenda a interface e crie seu primeiro planejador em minutos.
                    </div>
                </div>

                <div class="tutorial-item" onclick="abrirTutorial('gamificacao')">
                    <div class="tutorial-nome">‚≠ê Sistema de Gamifica√ß√£o - Ganhe XP e Suba de N√≠vel</div>
                    <div class="tutorial-preview">
                        Descubra como ganhar XP, subir de n√≠vel, manter streaks e desbloquear conquistas. Torne sua produtividade em um jogo emocionante!
                    </div>
                </div>

                <div class="tutorial-item" onclick="abrirTutorial('tarefas')">
                    <div class="tutorial-nome">‚úÖ Criando e Gerenciando Tarefas Avan√ßadas</div>
                    <div class="tutorial-preview">
                        Domine a cria√ß√£o de tarefas com prioridades, subtarefas, lembretes, tags, anexos e muito mais. Organize tudo que voc√™ precisa fazer.
                    </div>
                </div>

                <div class="tutorial-item" onclick="abrirTutorial('kanban')">
                    <div class="tutorial-nome">üìä Utilizando a Visualiza√ß√£o Kanban</div>
                    <div class="tutorial-preview">
                        Organize suas tarefas em colunas (A Fazer, Em Progresso, Conclu√≠do). Visualize o fluxo do seu trabalho de forma clara e intuitiva.
                    </div>
                </div>

                <div class="tutorial-item" onclick="abrirTutorial('google-sync')">
                    <div class="tutorial-nome">üìÖ Sincronizando com Google Calendar</div>
                    <div class="tutorial-preview">
                        Conecte sua conta Google e veja seus compromissos do Google Calendar integrados. Seus eventos aparecem automaticamente nos planejadores.
                    </div>
                </div>

                <div class="tutorial-item" onclick="abrirTutorial('estudo')">
                    <div class="tutorial-nome">üìö Dicas de Produtividade com Gamifica√ß√£o</div>
                    <div class="tutorial-preview">
                        T√©cnicas comprovadas para aumentar sua produtividade usando o sistema de XP, lembretes, contextos de tarefas e an√°lise de dados.
                    </div>
                </div>

                <div class="tutorial-item" onclick="abrirTutorial('relatorios')">
                    <div class="tutorial-nome">üìà Gerando Relat√≥rios e Insights</div>
                    <div class="tutorial-preview">
                        Analise gr√°ficos de produtividade, taxa de conclus√£o, tarefas por prioridade e muito mais. Entenda seus padr√µes de trabalho.
                    </div>
                </div>

                <div class="tutorial-item" onclick="abrirTutorial('atalhos')">
                    <div class="tutorial-nome">‚å®Ô∏è Atalhos Avan√ßados e Dicas Pr√°ticas</div>
                    <div class="tutorial-preview">
                        Domine atalhos de teclado, truques de produtividade e hacks para trabalhar 10x mais r√°pido no Planner Premium ULTRA.
                    </div>
                </div>
            </div>

            <!-- GOOGLE CALENDAR TAB -->
            <div id="googleTab" class="tab-content">
                <h2 style="margin-bottom:1.5rem; font-size:1.3em; font-weight:800;">üìÖ Google Calendar Integration</h2>
                
                <div style="background: white; border-radius: 12px; padding: 2rem; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
                    <div style="font-size: 3em; margin-bottom: 1rem;">üìÖ</div>
                    <h3 style="margin-bottom: 0.5rem;">Integra√ß√£o com Google Calendar</h3>
                    <p style="color: #666; margin-bottom: 1.5rem;">Seus compromissos do Google Calendar sincronizados automaticamente com o Planner Premium ULTRA</p>
                    
                    <button class="btn-primario" onclick="connectGoogleCalendar()" style="margin-bottom: 1rem;">üîó Conectar Google Calendar</button>
                    
                    <div id="googleEvents" style="margin-top: 2rem; display: none;">
                        <h4 style="margin-bottom: 1rem;">üìã Pr√≥ximos Eventos:</h4>
                        <div id="eventsList" style="text-align: left;"></div>
                    </div>
                    
                    <div style="margin-top: 2rem; background: linear-gradient(135deg, #F3E8FF, #E9D5FF); padding: 1.5rem; border-radius: 10px; text-align: left;">
                        <h4 style="margin-bottom: 0.5rem;">‚ú® Benef√≠cios da Integra√ß√£o:</h4>
                        <ul style="list-style: none; color: #666; font-size: 0.95em;">
                            <li>‚úÖ Sincroniza√ß√£o autom√°tica de eventos</li>
                            <li>‚úÖ Compat√≠vel com Android, iPhone, Web e Desktop</li>
                            <li>‚úÖ Funciona offline com atualiza√ß√µes autom√°ticas</li>
                            <li>‚úÖ Zero esfor√ßo - tudo acontece automaticamente</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- STATS TAB -->
            <div id="statsTab" class="tab-content">
                <h2 style="margin-bottom:1.5rem;">üìä Suas Estat√≠sticas</h2>
                <div style="background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
                    <p style="color: #666; text-align: center;">üìà Gr√°ficos e dados de produtividade aparecer√£o aqui</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Biblioteca -->
    <div id="modalBiblioteca" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="bibliotecaTitulo">Biblioteca</h2>
                <button class="close-modal" onclick="fecharModal('modalBiblioteca')">&times;</button>
            </div>
            <div id="bibliotecaConteudo" style="line-height: 1.8; color: #333;">
                <!-- Conte√∫do ser√° preenchido via JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal Tutoriais -->
    <div id="modalTutorial" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="tutorialTitulo">Tutorial</h2>
                <button class="close-modal" onclick="fecharModal('modalTutorial')">&times;</button>
            </div>
            <div id="tutorialConteudo" style="line-height: 1.8; color: #333;">
                <!-- Conte√∫do ser√° preenchido via JavaScript -->
            </div>
        </div>
    </div>

    <script>
        const SUPABASE_URL = 'https://szzirxygtjztusudfqsw.supabase.co';
        const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN6emlyeHlndGp6dHVzdWRmcXN3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM4NDk0NzEsImV4cCI6MjA3OTQyNTQ3MX0.zEMDaMA-DvcSiHmj4a3thB1Nnu9cEWGqfFes8R8lICA';
        
        let supabase = null;
        let currentUser = null;

        // Conte√∫do da Biblioteca
        const bibliotecaConteudo = {
            'diario': {
                titulo: 'üìù Planejador Di√°rio',
                conteudo: `
                    <h3>Planejador Di√°rio - 365 P√°ginas</h3>
                    <p>Uma p√°gina para cada dia do ano, com estrutura otimizada para maximizar sua produtividade.</p>
                    <h4 style="margin-top: 1.5rem;">Estrutura de Cada P√°gina:</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li><strong>Data:</strong> Identifica√ß√£o clara do dia</li>
                        <li><strong>Metas do Dia:</strong> 3 metas principais (regra dos 3)</li>
                        <li><strong>Tarefas:</strong> Lista completa de tarefas</li>
                        <li><strong>Reflex√£o:</strong> Como foi o dia? O que aprender?</li>
                        <li><strong>Gratid√£o:</strong> 3 coisas pelas quais voc√™ √© grato</li>
                        <li><strong>Pr√≥ximos Passos:</strong> Planejamento para amanh√£</li>
                    </ul>
                    <h4 style="margin-top: 1.5rem;">Como Usar:</h4>
                    <p>Comece cada dia preenchendo suas 3 metas principais. Durante o dia, adicione tarefas e marque como conclu√≠das. √Ä noite, fa√ßa a reflex√£o.</p>
                `
            },
            'semanal': {
                titulo: 'üìÜ Planejador Semanal',
                conteudo: `
                    <h3>Planejador Semanal - 52 P√°ginas</h3>
                    <p>Uma p√°gina para cada semana do ano. Vis√£o ampla dos seus compromissos e metas.</p>
                    <h4 style="margin-top: 1.5rem;">Estrutura de Cada P√°gina:</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li><strong>Semana:</strong> Data de in√≠cio e fim</li>
                        <li><strong>Objetivos da Semana:</strong> Metas principais</li>
                        <li><strong>Cronograma:</strong> Seg, Ter, Qua, Qui, Sex, S√°b, Dom</li>
                        <li><strong>Prioridades:</strong> O que √© mais importante</li>
                        <li><strong>Review:</strong> Como foi a semana?</li>
                    </ul>
                `
            },
            'mensal': {
                titulo: 'üìä Planejador Mensal',
                conteudo: `
                    <h3>Planejador Mensal - 12 P√°ginas</h3>
                    <p>Uma p√°gina para cada m√™s. Veja o panorama completo de 30 dias.</p>
                    <h4 style="margin-top: 1.5rem;">Estrutura de Cada P√°gina:</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li><strong>M√™s:</strong> Janeiro a Dezembro</li>
                        <li><strong>Objetivos Mensais:</strong> Grandes metas</li>
                        <li><strong>Calend√°rio:</strong> Vis√£o de 30 dias</li>
                        <li><strong>Eventos Importantes:</strong> Marcos e datas</li>
                        <li><strong>An√°lise:</strong> Performance do m√™s</li>
                    </ul>
                `
            },
            'anual': {
                titulo: 'üéØ Planejador Anual',
                conteudo: `
                    <h3>Planejador Anual - Vis√£o Completa do Ano</h3>
                    <p>Uma p√°gina para todo o ano. Defina sua vis√£o e acompanhe o progresso.</p>
                    <h4 style="margin-top: 1.5rem;">Se√ß√µes Principais:</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li><strong>Metas por Categoria:</strong> Sa√∫de, Financeiro, Relacionamentos, Desenvolvimento</li>
                        <li><strong>Milestones:</strong> Eventos importantes do ano</li>
                        <li><strong>Revis√£o Trimestral:</strong> 4 checkpoints ao longo do ano</li>
                        <li><strong>Reflex√£o Final:</strong> Aprendizados e crescimento</li>
                    </ul>
                `
            },
            'financeiro': {
                titulo: 'üí∞ Planejador Financeiro',
                conteudo: `
                    <h3>Planejador Financeiro - Controle Completo</h3>
                    <p>Gerencie seu dinheiro com intelig√™ncia e alcance independ√™ncia financeira.</p>
                    <h4 style="margin-top: 1.5rem;">M√≥dulos Inclusos:</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li><strong>Or√ßamento Mensal:</strong> Renda e despesas</li>
                        <li><strong>Categorias de Despesa:</strong> Alimenta√ß√£o, Transporte, Lazer, etc</li>
                        <li><strong>Investimentos:</strong> Acompanhamento de portf√≥lio</li>
                        <li><strong>Metas Financeiras:</strong> Fundo de emerg√™ncia, aposentadoria, etc</li>
                        <li><strong>An√°lise Mensal:</strong> Onde seu dinheiro vai?</li>
                    </ul>
                `
            },
            'saude': {
                titulo: 'üí™ Planejador de Sa√∫de',
                conteudo: `
                    <h3>Planejador de Sa√∫de - Bem-estar em Primeiro Lugar</h3>
                    <p>Rastreie exerc√≠cios, nutri√ß√£o, sono e sa√∫de mental para uma vida melhor.</p>
                    <h4 style="margin-top: 1.5rem;">Elementos Rastreados:</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li><strong>Exerc√≠cios:</strong> Tipo, dura√ß√£o, intensidade</li>
                        <li><strong>Nutri√ß√£o:</strong> Refei√ß√µes, calorias, √°gua consumida</li>
                        <li><strong>Sono:</strong> Horas dormidas, qualidade</li>
                        <li><strong>Sa√∫de Mental:</strong> Medita√ß√£o, humor, estresse</li>
                        <li><strong>Sa√∫de Preventiva:</strong> Consultas, exames</li>
                    </ul>
                `
            },
            'leitura': {
                titulo: 'üìö Rastreador de Leitura',
                conteudo: `
                    <h3>Rastreador de Leitura - Para Bibliofilia</h3>
                    <p>Organize sua leitura, crie metas de livros e n√£o esque√ßa das hist√≥rias.</p>
                    <h4 style="margin-top: 1.5rem;">Para Cada Livro:</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li><strong>T√≠tulo e Autor:</strong> Informa√ß√µes b√°sicas</li>
                        <li><strong>G√™nero:</strong> Fic√ß√£o, N√£o-fic√ß√£o, etc</li>
                        <li><strong>Progresso:</strong> P√°ginas lidas</li>
                        <li><strong>Resenha:</strong> Suas anota√ß√µes</li>
                        <li><strong>Avalia√ß√£o:</strong> Estrelas (1-5)</li>
                        <li><strong>Aprendizados:</strong> O que voc√™ aprendeu</li>
                    </ul>
                `
            },
            'viagem': {
                titulo: '‚úàÔ∏è Planejador de Viagens',
                conteudo: `
                    <h3>Planejador de Viagens - Prepare-se para Aventuras</h3>
                    <p>Organize cada detalhe da sua viagem, do or√ßamento ao itiner√°rio.</p>
                    <h4 style="margin-top: 1.5rem;">Se√ß√µes de Planejamento:</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li><strong>Destino e Datas:</strong> Informa√ß√µes essenciais</li>
                        <li><strong>Or√ßamento:</strong> Transporte, hospedagem, atividades</li>
                        <li><strong>Itiner√°rio Di√°rio:</strong> O que fazer cada dia</li>
                        <li><strong>Checklist de Mala:</strong> O que levar</li>
                        <li><strong>Contatos Importantes:</strong> Telefones, endere√ßos</li>
                        <li><strong>Experi√™ncias Desejadas:</strong> Sonhos para a viagem</li>
                    </ul>
                `
            },
            'metas': {
                titulo: 'üéØ Rastreador de Metas',
                conteudo: `
                    <h3>Rastreador de Metas - Alcance Seus Sonhos</h3>
                    <p>Defina metas SMART e acompanhe seu progresso ao longo do tempo.</p>
                    <h4 style="margin-top: 1.5rem;">Para Cada Meta:</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li><strong>Meta:</strong> O que voc√™ quer alcan√ßar</li>
                        <li><strong>Categoria:</strong> Pessoal, Profissional, Sa√∫de, Financeira</li>
                        <li><strong>Prazo:</strong> Quando quer alcan√ßar</li>
                        <li><strong>Passos:</strong> Como chegar l√° (quebra em sub-metas)</li>
                        <li><strong>Progresso:</strong> Porcentagem completa</li>
                        <li><strong>Revis√£o Mensal:</strong> Avalia√ß√£o do progresso</li>
                    </ul>
                `
            },
            'habitos': {
                titulo: 'üî• Construtor de H√°bitos',
                conteudo: `
                    <h3>Construtor de H√°bitos - 66 Dias para Nova Voc√™</h3>
                    <p>Crie novos h√°bitos positivos e destrua os negativos com foco di√°rio.</p>
                    <h4 style="margin-top: 1.5rem;">Sistema de Rastreamento:</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li><strong>H√°bito:</strong> O que deseja fazer</li>
                        <li><strong>Categoria:</strong> Sa√∫de, Produtividade, Aprendizado</li>
                        <li><strong>Frequ√™ncia:</strong> Di√°rio, 3x/semana, etc</li>
                        <li><strong>Checklist de 66 Dias:</strong> Marque cada conclus√£o</li>
                        <li><strong>Notas:</strong> Como voc√™ se sentiu</li>
                        <li><strong>Reward:</strong> Celebre seus sucessos</li>
                    </ul>
                `
            }
        };

        // Conte√∫do dos Tutoriais
        const tutoriaisConteudo = {
            'comeco': {
                titulo: 'üöÄ Como Come√ßar - Primeiros Passos',
                conteudo: `
                    <h3>Bem-vindo ao Planner Premium ULTRA!</h3>
                    <p>Vamos come√ßar sua jornada de produtividade em 5 passos simples.</p>
                    
                    <h4 style="margin-top: 1.5rem;">Passo 1: Crie Sua Conta</h4>
                    <p>Clique em "Criar Conta" e preencha seus dados. Voc√™ ganha 7 dias gr√°tis!</p>
                    
                    <h4 style="margin-top: 1.5rem;">Passo 2: Configure Suas Prefer√™ncias</h4>
                    <p>Escolha seus planners, cores favoritas e notifica√ß√µes.</p>
                    
                    <h4 style="margin-top: 1.5rem;">Passo 3: Crie Seu Primeiro Planner</h4>
                    <p>Clique em "Criar Novo Planner" e escolha o tipo (To-Do, Projeto, H√°bitos ou Financeiro).</p>
                    
                    <h4 style="margin-top: 1.5rem;">Passo 4: Adicione Sua Primeira Tarefa</h4>
                    <p>Clique em "+ Nova Tarefa" e comece a adicionar o que precisa fazer.</p>
                    
                    <h4 style="margin-top: 1.5rem;">Passo 5: Sincronize com Google Calendar (Opcional)</h4>
                    <p>Conecte sua conta Google para sincronizar eventos automaticamente.</p>
                    
                    <p style="margin-top: 1.5rem; font-style: italic; color: #666;">üí° Dica: Comece com um √∫nico planejador e adicione outros conforme se sentir confort√°vel!</p>
                `
            },
            'gamificacao': {
                titulo: '‚≠ê Sistema de Gamifica√ß√£o',
                conteudo: `
                    <h3>Transforme Produtividade em um Jogo!</h3>
                    <p>Nosso sistema de gamifica√ß√£o √© projetado para manter voc√™ motivado todos os dias.</p>
                    
                    <h4 style="margin-top: 1.5rem;">Como Ganhar XP</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li>Criar um planner: +50 XP</li>
                        <li>Criar uma tarefa: +30 XP</li>
                        <li>Completar uma tarefa: +20 XP</li>
                        <li>Completar 3+ tarefas num dia: +50 XP b√¥nus</li>
                    </ul>
                    
                    <h4 style="margin-top: 1.5rem;">Sistema de N√≠veis</h4>
                    <p>A cada 100 XP, voc√™ sobe um n√≠vel! Veja sua barra no topo da tela preenchendo.</p>
                    
                    <h4 style="margin-top: 1.5rem;">Streaks (Rajadas)</h4>
                    <p>Complete uma tarefa a cada dia para manter seu streak! üî• Quanto maior o streak, mais motivador!</p>
                    
                    <h4 style="margin-top: 1.5rem;">Conquistas (Achievements)</h4>
                    <p>Desbloqueie badges especiais completando objetivos:</p>
                    <ul style="margin-left: 1.5rem;">
                        <li>üéØ Primeira Tarefa - Complete sua 1¬™ tarefa</li>
                        <li>üëë Mestre das Tarefas - Complete 10 tarefas</li>
                        <li>üíØ Centen√°rio - Complete 100 tarefas</li>
                        <li>üî• Streak 7 Dias - Mantenha 7 dias seguidos</li>
                        <li>üí™ Streak 30 Dias - Mantenha 30 dias seguidos</li>
                    </ul>
                `
            },
            'tarefas': {
                titulo: '‚úÖ Criando Tarefas Avan√ßadas',
                conteudo: `
                    <h3>Domine a Cria√ß√£o de Tarefas</h3>
                    <p>Tarefas s√£o o cora√ß√£o do Planner Premium ULTRA. Aqui est√° como criar tarefas poderosas.</p>
                    
                    <h4 style="margin-top: 1.5rem;">Campos B√°sicos</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li><strong>T√≠tulo:</strong> O que voc√™ precisa fazer?</li>
                        <li><strong>Descri√ß√£o:</strong> Detalhes, contexto, objetivos</li>
                        <li><strong>Data:</strong> Quando precisa fazer?</li>
                        <li><strong>Hora:</strong> A que horas?</li>
                    </ul>
                    
                    <h4 style="margin-top: 1.5rem;">Prioriza√ß√£o</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li>üü¢ Baixa - Pode esperar</li>
                        <li>üü° M√©dia - Importante</li>
                        <li>üî¥ Alta - Urgente</li>
                        <li>üî• Urgente - Fazer hoje</li>
                        <li>‚ö° Cr√≠tica - Emerg√™ncia</li>
                    </ul>
                    
                    <h4 style="margin-top: 1.5rem;">Subtarefas</h4>
                    <p>Divida tarefas grandes em passos pequenos. Isso torna tudo mais gerenci√°vel!</p>
                    
                    <h4 style="margin-top: 1.5rem;">Lembretes</h4>
                    <p>Receba notifica√ß√µes: 5 min, 15 min, 30 min, 1 hora ou 1 dia antes.</p>
                    
                    <h4 style="margin-top: 1.5rem;">Tags e Categorias</h4>
                    <p>Organize por: Trabalho, Pessoal, Sa√∫de, Estudos, Financeiro</p>
                    
                    <h4 style="margin-top: 1.5rem;">Contexto</h4>
                    <p>Marque onde fazer: Casa, Escrit√≥rio, Online, Qualquer Lugar</p>
                `
            },
            'kanban': {
                titulo: 'üìä Visualiza√ß√£o Kanban',
                conteudo: `
                    <h3>O M√©todo Kanban para Fluxo Visual</h3>
                    <p>Veja suas tarefas em colunas: A Fazer, Em Progresso, Conclu√≠do.</p>
                    
                    <h4 style="margin-top: 1.5rem;">Como Usar</h4>
                    <ol style="margin-left: 1.5rem;">
                        <li>Crie suas tarefas normalmente</li>
                        <li>Clique na aba "Kanban" ao abrir um planejador</li>
                        <li>Veja todas as tarefas organizadas em 3 colunas</li>
                        <li>Arraste tarefas entre colunas conforme o progresso</li>
                    </ol>
                    
                    <h4 style="margin-top: 1.5rem;">Benef√≠cios</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li>Visualiza√ß√£o clara do progresso</li>
                        <li>Limite de WIP (Work in Progress)</li>
                        <li>Menos desperd√≠cio de tempo</li>
                        <li>Melhor foco nas prioridades</li>
                    </ul>
                    
                    <p style="margin-top: 1.5rem;"><strong>üí° Dica:</strong> Use Kanban para projetos com m√∫ltiplas etapas!</p>
                `
            },
            'google-sync': {
                titulo: 'üìÖ Sincronizando com Google Calendar',
                conteudo: `
                    <h3>Integra√ß√£o Perfeita com Google Calendar</h3>
                    <p>Seus compromissos aparecem automaticamente no Planner.</p>
                    
                    <h4 style="margin-top: 1.5rem;">Como Conectar</h4>
                    <ol style="margin-left: 1.5rem;">
                        <li>V√° para a aba "Google Calendar"</li>
                        <li>Clique em "Conectar Google Calendar"</li>
                        <li>Autorize o acesso √† sua conta Google</li>
                        <li>Pronto! Seus eventos est√£o sincronizados</li>
                    </ol>
                    
                    <h4 style="margin-top: 1.5rem;">O Que Voc√™ Ganha</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li>‚úÖ Eventos do Google Calendar aparecem no seu Planner</li>
                        <li>‚úÖ Funciona em todos os dispositivos</li>
                        <li>‚úÖ Atualiza√ß√µes autom√°ticas em tempo real</li>
                        <li>‚úÖ Offline com sincroniza√ß√£o quando online</li>
                        <li>‚úÖ Compat√≠vel: Android, iPhone, Web, Desktop</li>
                    </ul>
                    
                    <h4 style="margin-top: 1.5rem;">Compatibilidade Universal</h4>
                    <p>Como voc√™ tem Google Calendar, voc√™ j√° tem tudo que precisa!</p>
                    <ul style="margin-left: 1.5rem;">
                        <li>üì± iPhone: Google Calendar app nativa</li>
                        <li>ü§ñ Android: Google Calendar app nativa</li>
                        <li>üíª Web: google.com/calendar</li>
                        <li>üñ•Ô∏è Desktop: Qualquer navegador</li>
                    </ul>
                `
            },
            'estudo': {
                titulo: 'üìö Dicas de Produtividade',
                conteudo: `
                    <h3>T√©cnicas Comprovadas para Aumentar Produtividade</h3>
                    <p>Use o Planner Premium ULTRA para trabalhar mais inteligente, n√£o mais duro.</p>
                    
                    <h4 style="margin-top: 1.5rem;">1. Regra dos 3</h4>
                    <p>Escolha 3 tarefas principais para cada dia. Foco total nelas.</p>
                    
                    <h4 style="margin-top: 1.5rem;">2. T√©cnica Pomodoro</h4>
                    <p>Trabalhe 25 minutos, descanse 5. Use a dura√ß√£o das tarefas para controlar.</p>
                    
                    <h4 style="margin-top: 1.5rem;">3. M√©todo Kanban</h4>
                    <p>Limite de 3-5 tarefas em progresso. Termine antes de come√ßar novo.</p>
                    
                    <h4 style="margin-top: 1.5rem;">4. Contexto de Tarefas</h4>
                    <p>Agrupe tarefas por local: Casa, Escrit√≥rio, Online.</p>
                    
                    <h4 style="margin-top: 1.5rem;">5. Blocos de Tempo</h4>
                    <p>Reserve hor√°rios espec√≠ficos para tipos de tarefas.</p>
                    
                    <h4 style="margin-top: 1.5rem;">6. Mantenha Streaks</h4>
                    <p>Complete algo todo dia. Mesmo pequenas a√ß√µes contam!</p>
                    
                    <h4 style="margin-top: 1.5rem;">7. Revise Diariamente</h4>
                    <p>5 minutos de reflex√£o noturna economiza horas futura.</p>
                `
            },
            'relatorios': {
                titulo: 'üìà Relat√≥rios e Insights',
                conteudo: `
                    <h3>Analise Seus Dados de Produtividade</h3>
                    <p>Entenda seus padr√µes e melhore continuamente.</p>
                    
                    <h4 style="margin-top: 1.5rem;">Gr√°ficos Dispon√≠veis</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li>üìä Produtividade Semanal - Tarefas conclu√≠das por dia</li>
                        <li>üéØ Tarefas por Prioridade - Distribu√ß√£o de esfor√ßo</li>
                        <li>üìà Tend√™ncia de XP - Sua evolu√ß√£o gamificada</li>
                        <li>üî• Hist√≥rico de Streaks - Seus picos de consist√™ncia</li>
                        <li>üèÜ Progresso de Conquistas - Badges desbloqueadas</li>
                    </ul>
                    
                    <h4 style="margin-top: 1.5rem;">Perguntas que os Dados Respondem</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li>Qual √© meu melhor dia da semana?</li>
                        <li>Estou completando minhas tarefas de alta prioridade?</li>
                        <li>Meu streak est√° crescendo?</li>
                        <li>Qual √© minha taxa de conclus√£o?</li>
                        <li>Onde devo melhorar?</li>
                    </ul>
                `
            },
            'atalhos': {
                titulo: '‚å®Ô∏è Atalhos Avan√ßados',
                conteudo: `
                    <h3>Trabalhe 10x Mais R√°pido</h3>
                    <p>Use esses atalhos e truques para dominar o Planner.</p>
                    
                    <h4 style="margin-top: 1.5rem;">Atalhos de Teclado</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li><strong>Tab:</strong> Navegar entre campos</li>
                        <li><strong>Enter:</strong> Salvar tarefa</li>
                        <li><strong>Escape:</strong> Fechar modal</li>
                        <li><strong>Ctrl+Enter:</strong> Completar tarefa</li>
                    </ul>
                    
                    <h4 style="margin-top: 1.5rem;">Truques de Poder</h4>
                    <ul style="margin-left: 1.5rem;">
                        <li>Use Tags para filtrar rapidamente</li>
                        <li>Crie templates de tarefas repetitivas</li>
                        <li>Use a fun√ß√£o "Repetir" para h√°bitos</li>
                        <li>Configure lembretes autom√°ticos</li>
                        <li>Mantenha a tela em modo escuro para produ√ß√£o noturna</li>
                    </ul>
                    
                    <h4 style="margin-top: 1.5rem;">Hacks de Produtividade</h4>
                    <p><strong>1. Metas do Dia no In√≠cio:</strong> Preencha seus 3 objetivos antes de abrir email.</p>
                    <p><strong>2. Bloqueio de Tempo:</strong> Reserve 2 horas sem interrup√ß√µes.</p>
                    <p><strong>3. Review Semanal:</strong> Domingo √† noite, revise a semana.</p>
                    <p><strong>4. Celebrate Wins:</strong> Quando completar uma grande tarefa, comemore!</p>
                `
            }
        };

        async function init() {
            try {
                supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
                document.getElementById('appContainer').classList.add('active');
                updateEcoCounter();
            } catch (err) {
                console.error('Erro:', err);
            }
        }

        function updateEcoCounter() {
            // Simula√ß√£o: cada usu√°rio economiza ~500 folhas por ano (365 dias √ó tarefas)
            const hoursUsingApp = Math.floor(Math.random() * 8760); // Horas em um ano
            const paperSaved = Math.floor(hoursUsingApp / 2) * 10; // ~5 folhas por hora
            const treesSaved = Math.floor(paperSaved / 8333); // ~8333 folhas por √°rvore
            
            document.getElementById('paperSaved').textContent = paperSaved.toLocaleString('pt-BR');
            document.getElementById('treesSaved').textContent = treesSaved.toLocaleString('pt-BR');
        }

        function openTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            const tabs = ['planners', 'biblioteca', 'tutoriais', 'google', 'stats'];
            const index = tabs.indexOf(tab);
            if (index !== -1) {
                document.querySelectorAll('.tab-btn')[index].classList.add('active');
                document.getElementById(tab + 'Tab').classList.add('active');
            }
        }

        function abrirBiblioteca(tipo) {
            const conteudo = bibliotecaConteudo[tipo];
            if (!conteudo) return;
            
            document.getElementById('bibliotecaTitulo').textContent = conteudo.titulo;
            document.getElementById('bibliotecaConteudo').innerHTML = conteudo.conteudo;
            document.getElementById('modalBiblioteca').style.display = 'block';
        }

        function abrirTutorial(tipo) {
            const conteudo = tutoriaisConteudo[tipo];
            if (!conteudo) return;
            
            document.getElementById('tutorialTitulo').textContent = conteudo.titulo;
            document.getElementById('tutorialConteudo').innerHTML = conteudo.conteudo;
            document.getElementById('modalTutorial').style.display = 'block';
        }

        function connectGoogleCalendar() {
            alert('üîó Integra√ß√£o com Google Calendar\n\nEm breve voc√™ ser√° redirecionado para autorizar o acesso.\n\nSeus eventos ser√£o sincronizados automaticamente!');
            // Implementa√ß√£o completa do Google Calendar ser√° integrada aqui
        }

        function fecharModal(id) {
            document.getElementById(id).style.display = 'none';
        }

        function logout() {
            if (confirm('Deseja realmente sair?')) {
                window.location.reload();
            }
        }

        window.onclick = e => {
            if (e.target.classList.contains('modal')) e.target.style.display = 'none';
        };

        init();
    </script>
</body>
</html>
